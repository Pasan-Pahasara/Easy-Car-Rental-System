<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
</head>
<body>
<div class="table-responsive-xxl">
    <table class="table table-centered mb-0">
        <thead class="btn-primary">
        <tr>
            <th>NIC No</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Contact Number</th>
            <th>Address</th>
            <th>Email</th>
            <th>Availability</th>
            <th>Role Type</th>
            <th>User Name</th>
            <th>Password</th>
        </tr>
        </thead>
        <tbody id="tblDriver">

        </tbody>
    </table>
</div>
<script src="../assets/jQuery/jquery-3.6.0.min.js"></script>

<script>
    let baseUrl = "http://localhost:8080/Back_End_war/";

    // driverLoadTable();
    // function driverLoadTable() {
    //     // $("#tblDriver").empty();
    //     $.ajax({
    //         url: baseUrl + "driver",
    //         method: "get",
    //         contentType: "application/json",
    //         // data: JSON.stringify(driver),
    //         success: function (resp) {
    //             for (let i of resp.data) {
    //                 /*let row = `<tr><td>${driver.user_Id}</td><td>${driver.name.firstName}</td><td>${driver.name.lastName}</td><td>${driver.contact_No}</td><td>${driver.address}</td><td>${driver.email}</td><td>${driver.driver_Availability}</td><td>${driver.user.role_Type}</td><td>${driver.user.user_Name}</td><td>${driver.user.password}</td></tr>`;
    //                 $("#tblDriver").append(row);
    //                 console.log(row);*/
    //
    //                     let user_Id = i.user_Id;
    //                     let firstName = i.name.firstName;
    //                     let lastName = i.name.lastName;
    //                     let contact_No = i.contact_No;
    //                     let address = i.address;
    //                     let email = i.email;
    //                     let driverAvailability = i.driver_Availability;
    //                     let role_Type = i.user.role_Type;
    //                     let user_Name = i.user.user_Name;
    //                     let password = i.user.password;
    //
    //                 let row = "<tr><td>" + user_Id + "</td><td>" + firstName + "</td><td>" + lastName + "</td><td>" + contact_No + "</td><td>" + address + "</td><td>" + email + "</td><td>" + driverAvailability + "</td><td>" + role_Type + "</td><td>" + user_Name + "</td><td>" + password + "</td></tr>";
    //                 $("#tblDriver").append(row);
    //                 console.log(resp.message);
    //             }
    //
    //         },
    //         error: function (ob) {
    //         }
    //     });
    //
    // }
    getAllItems();

    function getAllItems() {
        $("#tblDriver").empty();
        $.ajax({
            url: baseUrl + "driver",
            method: "get",
            dataType:"json",
            contentType: "application/json",
            success: function (res) {
                    console.log(res);
                    for (let driver of res.data) {
                        let row = `<tr><td>${driver.user_Id}</td><td>${driver.name.firstName}</td><td>${driver.name.lastName}</td><td>${driver.contact_No}</td><td>${driver.address}</td><td>${driver.email}</td><td>${driver.driver_Availability}</td><td>${driver.user.role_Type}</td><td>${driver.user.user_Name}</td><td>${driver.user.password}</td></tr>`;
                        // <td>${driver.user.role_Type}</td><td>${driver.user.user_Name}</td><td>${driver.user.password}</td>
                        $("#tblDriver").append(row);
                    }
            },
            error: function (error) {
                // let message = JSON.parse(error.responseText).message;
                // alert(message);
            }
        });
    }
</script>
</body>
</html>