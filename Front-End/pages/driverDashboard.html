<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    title>Easy Car | Driver Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Full Stack Software Developer In Sri Lanka">
    <meta name="author" content="Pasan Pahasara">
    <meta name="owner" content="Pasan Pahasara">
    <link rel="shortcut icon" href="../assets/img/title.png">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600&family=Ubuntu&display=swap"
          rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dripicons/2.0.0/webfont.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dripicons/2.0.0/webfont.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/vendor/app.min.css" id="light-style">

    <style>
        * {
            font-family: 'Ubuntu', sans-serif;
        }
    </style>
</head>

<body class="loading"
      data-layout-config='{"leftSideBarTheme":"dark","layoutBoxed":false, "leftSidebarCondensed":false, "leftSidebarScrollable":false,"darkMode":false, "showRightSidebarOnStart": true}'>
<!-- Start Sidebar Wrapper-->
<section class="wrapper">
    <!-- Start Sidebar Content-->
    <div class="leftside-menu">
        <!-- light logo start -->
        <a href="#" class="logo text-center logo-light">
                    <span class="logo-lg mt-lg-4" style="line-height: 0.5rem;position: relative">
                        <img src="../assets/img/favicon.png" alt="" style="width: 7rem;"><br>
                        <span style="font-size: 20px; font-weight: bolder; color: #f0f0f0;">Eá—©SY</span> car rental</span>
            <span class="logo-sm">
                        <img src="../assets/img/favicon.png" alt="" height="17">
                    </span>
        </a>
        <!-- light logo end -->

        <!-- dark logo start -->
        <!--        <a href="#" class="logo text-center logo-dark">-->
        <!--                    <span class="logo-lg">-->
        <!--                        <img src="" alt="" height="16">-->
        <!--                    </span>-->
        <!--            <span class="logo-sm">-->
        <!--                        <img src="" alt="" height="16">-->
        <!--                    </span>-->
        <!--        </a>-->
        <!-- dark logo end -->

        <!-- slideMenu start -->
        <div class="h-100 pt-lg-1" id="leftside-menu-container" data-simplebar="">
            <ul class="side-nav">

                <li class="side-nav-title side-nav-item pt-lg-4">Navigation</li>

                <li class="side-nav-item">
                    <a href="#" id="LinkDriverSchedule" class="side-nav-link">
                        <i class="uil uil-estate"></i>
                        <span>Dashboards</span>
                    </a>
                </li>
                <li class="side-nav-item">
                    <a href="logIn.html" class="side-nav-link">
                        <i class="uil-sign-out-alt"></i>
                        <span> Sign Out </span>
                    </a>
                </li>
            </ul>
            <div class="clearfix"></div>
        </div>
        <!-- slideMenu end -->
    </div>
    <!-- End Sidebar Content-->

    <!-- Start Page Content here -->
    <div class="content-page">
        <!-- start content-->
        <div class="content">
            <!-- Start TopBar -->
            <div class="navbar-custom">
                <!-- start settings -->
                <ul class="list-unstyled topbar-menu float-end mb-0">
                    <li class="dropdown notification-list d-lg-none">
                        <a class="nav-link dropdown-toggle arrow-none" data-bs-toggle="dropdown" href="#" role="button"
                           aria-haspopup="false" aria-expanded="false">
                            <i class="uil uil-search noti-icon"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-animated dropdown-lg p-0">
                            <form class="p-3">
                                <input type="text" class="form-control" placeholder="Search ..."
                                       aria-label="Customer's name">
                            </form>
                        </div>
                    </li>

                    <li class="notification-list">
                        <a class="nav-link end-bar-toggle" href="javascript: void(0);">
                            <i class="dripicons-gear noti-icon"></i>
                        </a>
                    </li>
                </ul>
                <!-- end settings -->

                <!-- start leftSide -->
                <button class="button-menu-mobile open-left">
                    <i class="uil-align-left"></i>
                </button>
                <!-- end leftSide -->

                <!-- start searchBar -->
                <div class="app-search dropdown d-none d-lg-block">
                    <form>
                        <div class="input-group">
                            <input type="text" class="form-control dropdown-toggle" placeholder="Search..."
                                   id="top-search">
                            <span class="uil uil-search search-icon"></span>
                            <button class="input-group-text btn-primary" type="submit">Search</button>
                        </div>
                    </form>
                </div>
                <!-- end searchBar -->
            </div>
            <!-- End TopBar -->

            <!-- Start Driver Schedule Content-->
            <div class="container-fluid" id="driverSchedule">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li><a href="javascript: void(0);">Easy Car Rental</a></li>
                                    <li class="uil uil-angle-right active">Driver Schedule</li>
                                </ol>
                            </div>
                            <h4 class="page-title">Driver Schedule</h4>
                        </div>
                    </div>
                </div>
                <!-- end page title -->

                <!-- start content-->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-xl-12">
                                        <div class="row">

                                            <div class="table-nowrap flex-grow-0 col-xl-8" style="overflow-x:auto;-webkit-overflow-scrolling:touch;">
                                                <table class="table table-centered mb-0 col-xxl-6">
                                                    <thead class="btn-primary">
                                                    <tr>
                                                        <th scope="col">Driver ID</th>
                                                        <th scope="col">Rent ID</th>
                                                        <th scope="col">Car ID</th>
                                                        <th scope="col">Pick-Up Date</th>
                                                        <th scope="col">Pick-Up Time</th>
                                                        <th scope="col">Return Date</th>
                                                        <th scope="col">Return Time</th>
                                                        <th scope="col">Location</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tblDriverSchedule">

                                                    </tbody>
                                                </table>
                                            </div>

                                            <div class="col-xl-4 shadow">
                                                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d63397.34482830807!2d79.89441649307884!3d6.729034954627545!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae24616c169e7c3%3A0xd21e80c970651d56!2sPanadura!5e0!3m2!1sen!2slk!4v1676916771183!5m2!1sen!2slk"
                                                        height="400" style="border:0;" allowfullscreen=""
                                                        loading="lazy" class="col-12 col-xl-12 rounded-3"
                                                        referrerpolicy="no-referrer-when-downgrade"></iframe>
                                            </div>

                                        </div>
                                    </div>
                                    <!-- end col-->
                                </div>
                                <!-- end row -->
                            </div>
                            <!-- end card-body -->
                        </div>
                        <!-- end card-->
                    </div>
                    <!-- end col-->
                </div>
                <!-- end content-->

            </div>
            <!-- End Driver Schedule Content-->

            <!-- Start Footer Content -->
            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            <script>document.write(new Date().getFullYear())</script> Â© Pasan Pahasara
                        </div>
                        <div class="col-md-6">
                            <div class="text-md-end footer-links d-none d-md-block">
                                <a href="javascript: void(0);">About</a>
                                <a href="javascript: void(0);">Support</a>
                                <a href="javascript: void(0);">Contact Us</a>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
            <!-- End Footer Content -->

        </div>
        <!-- end content-->
    </div>
    <!-- End Page Content here -->
</section>
<!-- End Sidebar Wrapper-->

<!-- Bundle -->
<script src="../assets/js/vendor/vendor.min.js"></script>
<script src="../assets/js/vendor/app.min.js"></script>

<!-- Icons -->
<script src="https://code.iconify.design/iconify-icon/1.0.5/iconify-icon.min.js"></script>

<!-- jQuery -->
<script src="../assets/jQuery/jquery-3.6.0.min.js"></script>
<script>
    let driverScheduleBaseUrl = "http://localhost:8080/Back_End_war/";
    loadScheduleToDrivers();
    let newDriver;

    //<!------------------------------------ Navigations ------------------------------------------------>

    //<!-- Start Document Ready Navigation -->
    $(function () {
        $("#driverSchedule").css("display", "block");
    });
    <!-- End Document Ready Navigation -->

    //<!------------------------------------ Get Login User Id ------------------------------------------>

    $.ajax({
        url: driverScheduleBaseUrl + "user/current",
        method: "get",
        success: function (res) {
            newDriver = res.data.user_Id;
        }
    });

    //<!------------------------------------ Driver Schedule -------------------------------------------->

    <!-- start load driver Schedule function -->
    function loadScheduleToDrivers() {
        $.ajax({
            url: driverScheduleBaseUrl + "rent",
            method: "get",
            contentType: "application/json",
            dataType: "json",
            success: function (res) {
                for (var driver of res.data) {
                    if (newDriver === driver.rentDetails.at(0).driverID) {
                        $("#tblDriverSchedule").append(`<tr><td>${driver.rentDetails.at(0).driverID}</td><td>${driver.rentID}</td><td>${driver.rentDetails.at(0).carID}</td><td>${driver.pickUpDate}</td><td>${driver.pickUpTime}</td><td>${driver.returnDate}</td><td>${driver.returnTime}</td><td>${driver.location}</td></tr>`);
                    }
                }
            }
        })
    }
    <!-- end load driver Schedule function -->

</script>
</body>
</html>